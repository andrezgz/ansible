---
# tasks file for mint

- name: Instalaciones inicial
  block:

  - name: Borramos defaults inservibles
    package:
      state: absent
      name: "{{item}}"
    with_items:
      - vim.tiny
      - libreoffice-core
      - libreoffice-common
      - redshift

  - name: Instalamos desde apt-get
    package:
      name: "{{item}}"
    with_items:
      - vim
      - git
      - direnv # Environment switcher for the shell
  become: true

# Lo instalamos antes, para que cuando se instalen los software que usan las config
# ya tengan estas configs por defecto, y el repo git clonado
# Si se hace despues se pudre la creacion de repos en carpetas con archivos existentes
- name: Instalaciones de repos de configuraciones
  block:

  - name: Settings Sublime
    git:
      repo: git@github.com:ndelucca/sublime-settings.git
      dest: "/home/{{user}}/.config/sublime-text-3/"

  - name: Settings VS Code
    git:
      repo: git@github.com:ndelucca/vscode-settings.git
      dest: "/home/{{user}}/.config/Code/User/"
  
  - name: Extensiones VS Code
    git:
      repo: git@github.com:ndelucca/vscode-extensions.git
      dest: "/home/{{user}}/.vscode/extensions/"
  
  - name: Bash customs
    git:
      repo: git@github.com:ndelucca/bash.git
      dest: "/home/{{user}}/.bash_customs/"
  
  - name: Workspaces de editores
    git:
      repo: git@github.com:ndelucca/workspaces-projects.git
      dest: "/home/{{user}}/workspaces/"
  
- name: Instalaciones de apps a gusto
  block:

  - name: Instalamos a mano soapui
    import_role:
      name: soapui # SOAP tester
    when: install_soapui|bool

  - name: Instalamos desde apt-get
    package:
      name: "{{item}}"
    with_items:
      - vagrant # VM
      - virtualbox # VM
      - mysql-workbench # MySql graphic
      - samba # Dancing application?
      - numlockx # The most important app in the world
      - redshift
      - redshift-gtk

  - name: Instalamos desde snap
    snap:
      name: "{{item}}"
    with_items:
      - postman # REST tester
      - mycli # MySql command line
      - gitkraken # Git - Graphic UI
      - grv # Git - Graphic UI from Command Line
      - chromium # Browser
      - firefox # Browser
      - libreoffice # Shit sometimes necesary
      - inkscape # Drawings in SVG
      - simplenote # Notepad with Sync
      - whatsdesk # Shit

  - name: Instalamos desde snap classic
    snap:
      name: "{{item}}"
      classic: yes
    with_items:
      - code # Editor Visual Studio Code
      - sublime-text # Editor Sublime Text
      - skype # Shit
  become: true

  # extras

- name: Configuramos redshift
  template:
    dest: /home/{{user}}/.config/redshift.conf # required. Location to render the template to on the remote machine.
    src: redshift.conf # required. Path of a Jinja2 formatted template on the Ansible controller. This can be a relative or absolute path.
    force: yes # not required. the default is C(yes), which will replace the remote file when contents are different than the source.  If C(no), the file will only be transferred if the destination does not exist.
    